
from fastapi import FastAPI
from . import schema
from random import randrange

app= FastAPI()

usersData=[]

# common function for searching

def searchUser(id):
    for index,data in enumerate(usersData):
        if(data['id'] == id):
            return data


# find the user
@app.get('/finduser/{id}')
def findUserById(id:int):
    findData= searchUser(id)
    return {'message': findData}


# load the userdata array
@app.get('/loaddata')
def loadUsers():
    return {'users': usersData}

# add data to array
@app.post('/adduser')
def addUser(payload:schema.User):
    data= payload.model_dump()
    data['id']=randrange(1,1000)
    usersData.append(data)
    return {'message': data}
    






